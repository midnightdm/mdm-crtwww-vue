{"version":3,"sources":["webpack:///./src/views/alerts/Waypoint.vue","webpack:///./src/views/alerts/Waypoint.vue?5809","webpack:///./src/views/alerts/Waypoint.vue?371e"],"names":["id","style","mapOn","src","bgMap","title","vesselImg","supImg","supalt","text","vesselID","to","apubID","db","data","event","direction","vesselName","pubDate","base","bgImg","backgroundImage","props","mounted","document","body","this","getData","$store","commit","unmounted","methods","parseInt","q","cnt","apubSnapshot","forEach","ret","format","Date","dir","includes","substr","length","str","render"],"mappings":"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","file":"js/chunk-1d6bf5ed.e73dbba8.js","sourcesContent":["<template>\r\n   <div id=\"wrapper\" >\r\n    <div id=\"main\">\r\n        <div v-if=\"mapOn\" id=\"map\"></div> \r\n        <div v-else id=\"shadow1\">\r\n            <img id=\"mapImg\" :src=\"bgMap\" title=\"A Google Earth map shows a representation of a tow vessel at the noted waypoint location along the river.\">\r\n        </div>\r\n        <div id=\"shadow2\">\r\n            <img id=\"vesselImg\" :src=\"vesselImg\" title=\"Image of the vessel {{vesselName}}\">\r\n        </div>\r\n        <div id=\"shadow3\" v-if=\"supImg\">\r\n            <img id=\"supImg\" :src=\"supImg\" :title=\"supalt\">\r\n        </div>\r\n        <div id=\"shadow4\">\r\n            <h1 id=\"overlay1\">{{text}}</h1>            \r\n        </div>\r\n           <router-link v-if=\"vesselID != ''\" id=\"history\" :to=\"{ name: 'Detail',  params: { id: vesselID}}\">History</router-link>\r\n    </div>\r\n  </div>  \r\n  <!--\r\n  <script src=\"<?php echo getEnv('BASE_URL');?>js/waypoint.js\"></script>\r\n  <script defer async\r\nsrc=\"https://maps.googleapis.com/maps/api/js?key=<?php echo getEnv('MDM_CRT_MAP_KEY');?>&callback=initMap\">\r\n</script>\r\n<script type=\"text/javascript\">\r\n  var vesselPos  = JSON.parse(' $position ');\r\n  var vesselName = \"$vesselName \";\r\n</script>\r\n--> \r\n<h2 v-if=\"!this.apubID\" style=\"color: red; position: absolute; top:175px;\">ERROR: ID not found.</h2>\r\n\r\n</template>\r\n\r\n<script>\r\nimport format from 'date-fns/format'\r\nimport { firestore } from '@/store/firebaseApp.js'\r\nimport { doc, getDocs, collection, query, where } from 'firebase/firestore'\r\n\r\nconst db = firestore\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            text: \"\",\r\n            event: \"\",\r\n            direction: \"\",\r\n            vesselName: \"\",\r\n            vesselID: \"\",\r\n            pubDate: \"\",\r\n            vesselImg: \"\",\r\n            bgMap: \"\",\r\n            supImg: \"\",\r\n            supalt: \"\",\r\n            mapOn: false,\r\n            base: process.env.VUE_APP_IMG_URL,\r\n            bgImg: { backgroundImage: \"url(\"+ process.env.VUE_APP_IMG_URL+\"/images/bg-pattern-blue.png)\"}            \r\n        }\r\n    },\r\n    props: [ 'apubID'],\r\n    mounted() {\r\n      document.body.style.backgroundImage = process.env.VUE_APP_IMG_URL+'/images/bg-pattern-blue.png'\r\n      this.getData()\r\n      this.$store.commit('setSlate', 'WAYPOINT')\r\n      this.$store.commit('setPageSelected', 'Waypoint')\r\n    },\r\n    unmounted() {\r\n       this.$store.commit('setPageSelected', null)\r\n    },\r\n    methods: {\r\n        async getData() {\r\n            let id = parseInt(this.apubID)\r\n            const q = query(collection(db, 'Alertpublish'), where('apubID', '==', id))\r\n            let cnt = 0\r\n            const apubSnapshot = await getDocs(q)\r\n            apubSnapshot.forEach( (ret) => {\r\n                if(cnt>0) { return }\r\n                let data = ret.data()\r\n                this.text = data['apubText']\r\n                this.vesselID = data['apubVesselID']\r\n                this.direction = data['apubDir']\r\n                this.event    =  data['apubEvent']\r\n                this.pubDate  = format(new Date(parseInt(data['apubTS'])*1000), \"iii MMM d, yyyy\")\r\n                this.vesselImg = data['apubVesselImageUrl']\r\n                this.vesselName = data['apubVesselName']\r\n                cnt++\r\n            })\r\n            //Fail gracefully if apubID not found\r\n            if(cnt==0) {\r\n                this.event = \"Not Found\"\r\n                this.bgMap = this.base + \"/images/charlie-up-map.png\";\r\n\r\n            } else {\r\n                //Determine background map by event and direction data\r\n                let dir = this.direction.includes('wn') ? \"down\" : \"up\"\r\n                //Strip waypoint basename as event name\r\n                this.event = this.event.substr(0, this.event.length-2)\r\n                let str = this.event + \"-\" + dir + \"-map.png\"\r\n                this.bgMap = this.base +\"/images/\"+str\r\n            }\r\n\r\n            //Determine dam or bridge image by event\r\n            switch(this.event) {\r\n                case 'alpha': {\r\n                    this.supImg = this.base+\"/images/lock13.jpg\"; \r\n                    this.supalt = \"Image of Lock and Dam 13.\";\r\n                    this.mapOn  = false;  \r\n                    break;  \r\n                }\r\n                case 'bravo':   {\r\n                    this.supImg = this.base+\"/images/lock13.jpg\"; \r\n                    this.supalt = \"Image of Lock and Dam 13.\";\r\n                    this.mapOn  = false;  \r\n                    break;\r\n                }\t\t\t\r\n                case 'charlie': {\r\n                    this.supImg = this.base+\"/images/drawbridge.jpg\";\r\n                    this.supalt = \"Image of the railroad drawbridge.\";\r\n                    this.mapOn  = false;  \r\n                    break;\r\n                }\r\n                case 'delta':  {\r\n                    this.supImg = this.base+\"/images/drawbridge.jpg\";\r\n                    this.supalt = \"Image of the railroad drawbridge.\";\r\n                    this.mapOn  = false;  \r\n                    break;\r\n                } \r\n                case 'detected': {\r\n                    this.supImg = this.base+\"/images/compass.png\"\r\n                    this.supalt = \"Decorative drawing of a compass.\"\r\n                    this.mapOn  = true; \r\n                    //$data['position']  = stringToMapPosition($row['apubText']);\r\n                    //$data['text'] = convertUrlToLink($data['text']); \r\n                    break;\r\n                }\r\n                case 'Not Found': {\r\n                    this.supImg = false\r\n                    this.supalt = \"Decorative drawing of a compass.\"\r\n                    this.mapOn = false\r\n                    this.vesselImg = process.env.VUE_APP_NOIMG_URL\r\n                    this.text = \"Alert event \"+this.apubID+\" was not found. The data may have expired.\"\r\n                    this.vesselName = \"Not Found\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n    /*\r\n\t\t$str    = \"D, j M Y G:i:s \\C\\D\\T\"; \r\n\t\t$offset = getTimeOffset();\r\n\t\t$time   = time();\r\n    */ \r\n\r\n</script>\r\n\r\n<style>\r\n\r\n\r\n\r\n#shadow1 {\r\n    position: absolute;\r\n    top: 1rem;\r\n    left: 50px;\r\n    width: auto;\r\n    height: 900px;\r\n    overflow: clip;\r\n    background-color: black;\r\n    z-index: -3;\r\n}\r\n\r\n#mapImg {\r\n    position: relative;\r\n    width: auto;\r\n    height: 100%;\r\n    top: -20px;\r\n    left: -20px;\r\n    z-index: -2;\r\n    \r\n}\r\n\r\n#map {\r\n    position: absolute;\r\n    width: 1000px;\r\n    height: 800px;\r\n    top: 30rem;\r\n    left: 30rem;\r\n    z-index: -3;\r\n}\r\n\r\n#shadow2 {\r\n    position: absolute;\r\n    top: 170px;\r\n    left: 70%;\r\n    width: 30%;\r\n    height: auto;\r\n    background-color: black;\r\n    z-index: -3;  \r\n}\r\n\r\n#vesselImg {\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    top: -20px;\r\n    left: -20px;\r\n    z-index: -2;\r\n}\r\n\r\n\r\n#shadow3 {\r\n    position: absolute;\r\n    top: 55%;\r\n    left: 70%;\r\n    width: 30%;\r\n    height: auto;\r\n    background-color: black;\r\n    z-index: -3;  \r\n}\r\n\r\n#supImg {\r\n    position: relative;\r\n    width: 100%;\r\n    height: auto;\r\n    background-color: white;\r\n    top: -20px;\r\n    left: -20px;\r\n    z-index: -2;\r\n}\r\n\r\n#shadow4 {\r\n    position: absolute;\r\n    top: 85%;\r\n    left: 8%;\r\n    width: 75%;\r\n    height: auto;\r\n    background-color: black;\r\n    z-index: -3;\r\n    transform: translate(550px, -150px);  \r\n}\r\n\r\n#overlay1 {\r\n    position: relative;\r\n    background-color: skyblue;\r\n    width: 100%;\r\n    height: 100%;    \r\n    padding: 25px;\r\n    top: -20px;\r\n    left: -20px;\r\n    z-index: -2;\r\n}\r\n\r\n#history {\r\n    background-color: greenyellow;\r\n    border: 4px solid black;\r\n    text-align: center;\r\n    border-radius: 10%; \r\n    padding: 10px;\r\n\r\n    font-weight: bold;\r\n    position: fixed;\r\n    bottom: 30px;\r\n    right: 15px;\r\n\r\n}\r\n\r\n/* Phone */\r\n@media (max-width: 750px) {\r\n  #map {\r\n      width: 260px;\r\n      height: 700px;\r\n      top: 9rem;\r\n      left: 0px;\r\n  }\r\n  #shadow1 {\r\n    left:-60%;\r\n      \r\n  }\r\n  #shadow3 {\r\n    top: 40%;\r\n    left: 70%;\r\n    width: 30%;\r\n    height: auto;  \r\n  }\r\n  \r\n  #vesselImg {\r\n    max-width:80%;      \r\n  }\r\n\r\n  #shadow4 {\r\n    top: 75%;\r\n    left: 10px;\r\n    width: 55%;\r\n    height: 10rem;\r\n    transform: translate(15px, 35px);  \r\n  }\r\n  \r\n  #overlay1 {\r\n    font-size: 1rem;\r\n  }\r\n\r\n  img#mapImg {\r\n    margin: 20vh 0;\r\n    width: 100%;\r\n    height: auto;\r\n    overflow-y: scroll;\r\n  }\r\n}\r\n\r\n\r\n/* Tablet */\r\n @media (min-width: 801px) {\r\n    #shadow4 {\r\n        top: 80%;\r\n        left: 10px;\r\n        width: 55%;\r\n        transform: translate(15px, 35px);   \r\n    }  \r\n    #overlay1 {\r\n        font-size: 1rem;\r\n    }\r\n\r\n }\r\n \r\n</style>","import { render } from \"./Waypoint.vue?vue&type=template&id=46d8acca\"\nimport script from \"./Waypoint.vue?vue&type=script&lang=js\"\nexport * from \"./Waypoint.vue?vue&type=script&lang=js\"\n\nimport \"./Waypoint.vue?vue&type=style&index=0&id=46d8acca&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Waypoint.vue?vue&type=style&index=0&id=46d8acca&lang=css\""],"sourceRoot":""}